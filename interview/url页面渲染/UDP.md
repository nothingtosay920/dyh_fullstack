# 传输层: UDP TCP


# UDP协议
数据报的搬运工 无连接协议 不保证有序且不丢失 不控制流量
面向无对象 不需要连接双方
- 面向无对象指：
  不需要三次握手

发送端: 应用层(浏览器) ---> 把数据交给传输层(UDP)(增加一个UDP标识) ----> 传给网络层
接收端: 网络层 ---> 传输层 ---> 应用层

- 不可靠性
  1. 无连接
  2. 不解析数据
  3. 没有拥塞控制

  应用场景 即时性较高的情况 视频通话 视频会议

- 高效
  1. 不需要保证数据不会丢失且有序
  2. 头部开销小 只有8个字节 TCP有至少20字节

- 传输方式
  1. 一对一
  2. 一对多
  3. 多对多
  4. 多对一

# TCP协议
  建立连接 传输过程中有各种算法保证数据的可靠性 没有UDP高效
  - 三次握手
    1. 客户端向服务端发送连接请求
    2. 服务端向客户端发送响应
    3. 客户端接收到响应后向服务端发送确认报文(确认建立连接)

    # 为什么TCP建立连接需要3次?为什么不是2次?
    服务端发送连接请求A 因为网络问题没有到达服务端
    那么TCP会启动超时从传机制 从新发送一个连接请求B 
    当B顺利到达服务端后 如果建立了连接 当数据传输网后连接断开 这时候A才到达服务端 服务端就会认为客户端又想建立连接
    于是服务端给予响应 但是此时客户端已经关闭 服务端就会一直等待 造成资源浪费


  - 四次挥手
    1. 客户端向服务端发送连接释放请求
    2. 服务端接收到释放请求 会告诉应用层要释放TCP连接了 就会发送ACK包 并进入CLOSE_wait状态(客户端是不能向服务端发数据了 服务端可以向客户端发送数据)
    3. 如果有数据没传完 服务端继续把这最后一次传完到客户端 (服务端变成CLOSE状态)
    4. 客户端接收到服务端释放请求的响应后向服务端发起确认断开请求 2ms后如果没接收到应答就自动断开请求