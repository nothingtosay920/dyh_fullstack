<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <!-- View -->
  <!-- 挂载点 -->
  <div class="wrapper">
    <!-- <div class="like-btn">
      <div class="like-text">点赞</div>
    </div> -->
  </div>
  <script>
  // DOM
  // 数据-状态
//   const button = document.querySelector('.like-btn')
//   const buttonText = document.querySelector('.like-text')
//   let isLiked = false; // 界面的状态 数据
//   button.addEventListener('click', () => {
//     isLiked = !isLiked
//     if (isLiked) {
//         buttonText.innerHTML = '取消'
//     }else {
//         buttonText.innerHTML = '点赞'
//     }
//   }, false)

// 公共的方法
// tmp1 字符串的操作
    const createDOMFromString = (domString) => {
        const div = document.createElement('div')
        div.innerHTML = domString
        return div
    }
    class LikeButton {
        constructor() {
            this.state = {
                isLiked: false
            }
        }
        // data
        // 模板编译 做一下 核心 react
        // 渲染
        render() { // view
            this.el = createDOMFromString( 
                    `<button id="like-btn">
                    <span class="like-text">点赞</span>
                    </button>`)
            this.el.addEventListener('click', this.changeLikeText.bind(this) , false)
            return this.el
        }     
        // 把方法列出来
        changeLikeText() {
            const likeText = this.el.querySelector('.like-text')
            // 维护好数据状态
            this.state.isLiked = !this.state.isLiked
            likeText.innerHTML = this.state.isLiked ? '取消' : '点赞'
        }
    }
    // 挂载点
    const wrapper = document.querySelector('.wrapper')
    // DOM查找
    // DOM 性能很差
    const likeButton1 = new LikeButton()
    const likeButton2 = new LikeButton()
    wrapper.appendChild(likeButton1.render())
  </script>
</body>
</html>